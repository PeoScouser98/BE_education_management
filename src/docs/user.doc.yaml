paths:
    /auth/google:
        get:
            tags:
                - Auth
            summary: Đăng nhập với Google.
            responses:
                200:
                    description: Redirect đến page signin/success của client -> call api `{{baseUrl}}/auth/user` lấy thông tin user đăng nhập

    /auth/user:
        get:
            tags:
                - Auth
            summary: Lấy thông tin User đã đăng nhập.
            responses:
                200:
                    description: Ok
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    accessToken:
                                        type: string
                                        example: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdXRoIjoiMTgyYTExYzIyY2M1YmJiMWVkNjY5ZWRkYmRkZjBiNDZjMjYxMDA4YmIxZDRkMzllIiwiaWF0IjoxNjc4MjAyMzIzLCJleHAiOjE2NzgyMDU5MjN9.SsBcxJH5QN36QWvbaJl4epl7kTmzFCxUTkf1Rto683g'
                                    user:
                                        type: object
                                        example:
                                            {
                                                _id: '5ffceda8cfc3ee8f0b3a507d',
                                                displayName: 'Adminstrator',
                                                picture: 'https://ui-avatars.com/api/?name=a',
                                            }

                404:
                    description: Account does not exist
                    content:
                        application/json:
                            schema:
                                $ref: '/#/components/schemas/HttpError'

    /auth/signout:
        get:
            tags:
                - Auth
            summary: Đăng xuất
            description: Đăng xuất khỏi hệ thống
            responses:
                200:
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HttpResponse'
                            example: { message: 'Signed out!', statusCode: 200 }

    /users/create-teacher-account:
        post:
            tags:
                - User
            summary: Tạo mới giáo viên (chỉ có User role là Headmaster mới tạo được)
            description: Trả về thông tin tài khoản giáo viên và gửi mật khẩu về mail cho giáo viên
            requestBody:
                type: object
                schema:
                    $ref: '#/components/schemas/Teacher'
                example:
                    {
                        email: 'quanghiep03198@gmail.com',
                        password: '123123',
                        fullName: 'Quang Hiep',
                        dateOfBirth: '1/1/1980',
                        eduBackground: 'ĐẠI HỌC',
                        employmentStatus: 'ĐANG CÔNG TÁC',
                        phone: '0336089988',
                    }
            responses:
                201:
                    description: Created
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Teacher'
                            example:
                                {
                                    email: 'quanghiep03198@gmail.com',
                                    password: '123123',
                                    fullName: 'Quang Hiep',
                                    dateOfBirth: '1/1/1980',
                                    eduBackground: 'ĐẠI HỌC',
                                    employmentStatus: 'ĐANG CÔNG TÁC',
                                    phone: '0336089988',
                                }
                400:
                    description: Bad Request
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HttpError'
                            example: { message: 'BAD REQUEST', statusCode: 400 }
                5xx:
                    description: Unexpected Error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HttpError'
                            example: { message: 'INTERNAL ERROR', statusCode: 500 }

    /update-user:
        patch:
            tags:
                - User
            summary: Update thông tin người dùng
            schema:
                properties:
                    displayName:
                        type: string
                    gender:
                        type: string
                        format: uppercase
                        enum:
                            - nam
                            - nữ
                    dateOfBirth:
                        type: Date
                    picture:
                        type: string
                    eduBackground: 
                        type: object 
                        properties:
                            universityName:
                                type: string
                            graduatedAt:
                                type: date
                            qualification:
                                type: string

            responses:
                201:
                    description: Updated
                    content:
                        application/json:
                            schema:
                                properties:
                                    displayName:
                                        type: string
                                    gender:
                                        type: string
                                        format: uppercase
                                        enum:
                                            - nam
                                            - nữ
                                    dateOfBirth:
                                        type: Date
                                    picture:
                                        type: string
                                    eduBackground: 
                                        type: object 
                                        properties:
                                            universityName:
                                                type: string
                                            graduatedAt:
                                                type: date
                                            qualification:
                                                type: string

                401:
                    description: Unauthorized
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HttpError'
                400:
                    description: Bad Request
                    content:
                        application/json:
                            schema: 
                                $ref: '#/components/schemas/HttpError'
                            example: 
                                {
                                    message: "User does not exist!",
                                    statusCode: 400
                                }
    /refresh-token:
        get:
            tags:
                - Auth
            summary: Lấy access token mới.
            responses:
                200:
                    description: Ok
                    content:
                        application/json:
                            schema:
                                properties:
                                    refreshToken:
                                        type: string
                                    message:
                                        type: string
                                    statusCode:
                                        type: number
                            example:
                                {
                                    refreshToken: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdXRoIjoiMTgyYTExYzIyY2M1YmJiMWVkNjY5ZWRkYmRkZjBiNDZjMjYxMDA4YmIxZDRkMzllIiwiaWF0IjoxNjc4MjAyMzIzLCJleHAiOjE2NzgyMDU5MjN9.SsBcxJH5QN36QWvbaJl4epl7kTmzFCxUTkf1Rto683g',
                                    message: 'ok',
                                    statusCode: 200,
                                }
    /users/teachers:
        get:
            tags:
                - User
            summary: Lấy tất cả giáo viên 
            description: Lấy tất cả giáo viên của tất cả trạng thái
            parameters:
                - name: is_verified
                  in: query
                  required: true
                  description: Lọc giáo viên đã xác thực mail
                  schema:
                      type: boolean
                      
                - name: employment_status
                  in: query
                  required: true
                  description: Lọc giáo viên theo employment_status
                  schema:
                      type: boolean

            responses:
                200:
                    description: OK
                    content: 
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/Teacher'
                            example:
                                [  
                                    {
                                        "_id": "6448f4d7d362bc157275d9df",
                                        "email": "hieptqph19231@fpt.edu.vn",
                                        "phone": "0123321123",
                                        "displayName": "Teacher 1",
                                        "dateOfBirth": "1989-12-31T17:00:00.000Z",
                                        "gender": "Nữ",
                                        "eduBackground": {
                                        "qualification": "Đại Học",
                                        "universityName": "Đại học Sư Phạm Hà Nội",
                                        "graduatedAt": "1999-12-31T17:00:00.000Z",
                                        "_id": "6448f4d7d362bc157275d9e0"
                                        },
                                        "employmentStatus": false,
                                        "role": "Teacher",
                                        "isVerified": true,
                                        "createdAt": "2023-04-26T09:54:31.379Z",
                                        "updatedAt": "2023-05-07T12:33:52.645Z",
                                        "deleted": true,
                                        "userStatusText": "Đã nghỉ việc",
                                        "id": "6448f4d7d362bc157275d9df"
                                    }
                                ]
                404:  
                    description: Không tìm thấy giáo viên nào
                    content:
                        application/json:
                            schema:
                                $ref: '/#/components/schemas/HttpError'
                                # test api
                5xx:
                    description: Unexpected Error
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/HttpError'
                            example: { message: 'INTERNAL ERROR', statusCode: 500 }    

    /users/teachers/:userId/deactivate:
        patch:
            tags:
                - User
            summary: Thay đổi trạng thái giáo viên
            description: Thay đổi trạng thái giáo viên thành đã nghỉ việc   
            parameters:
                - in: path
                  name: userId
                  type: string
                  reqrequired: true 
            requestBody:
                content:
                    application/json:
                        schema:
                            type: object
                        properties:
                            employmentStatus:
                                type: boolean
                            deleted:
                                type: boolean
            responses:
                201:
                    description: Chuyển trạng thái giáo viên thành công
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Teacher'
                            example:
                                {
                                    _id: "6453e220568371f8807768f9",
                                    email: "duongcoi1803@gmail.com",
                                    phone: "0982967646",
                                    displayName": "Dương teacher",
                                    dateOfBirth: "2023-05-10T17:00:00.000Z",
                                    gender: "Nam",
                                    eduBackground: {
                                        qualification: "12/12",
                                        universityName: "cao đẳng fpt",
                                        graduatedAt: "2023-06-02T17:00:00.000Z"
                                    },
                                    employmentStatus: false,
                                    role: "Teacher",
                                    isVerified: true,
                                    deleted: true,
                                    createdAt: "2023-05-04T16:49:36.082Z",
                                    updatedAt: "2023-05-14T08:36:13.460Z"
                                }
                404:
                    description: Không tìm thấy giáo viên với userId được cung cấp
                    content:
                        application/json:
                            schema:
                                $ref: '/#/components/schemas/HttpError'
                            example:
                                {
                                    message: "Cannot find teacher to deactivate!",
                                    statusCode: 404
                                }
    /users/create-parents-account:   
        post:
            tags:
                - User
            summary: Tạo mới tài khoản phụ huynh 
            description: Tạo mới tài khoản phụ huynh
            requestBody:  
                type: object
                content:
                    application/json:
                        schema: 
                            properties:
                                displayName:
                                    type: string
                                    required: true
                                gender:
                                    type: string
                                    format: uppercase
                                    enum:
                                        - nam
                                        - nữ
                                    required: true
                                email:
                                    type: string
                                    regex: '/^[\w.+\-]+@gmail\.com$/'
                                    required: true
                                phone:
                                    type: string
                                    length: 10
                                    required: true
                                dateOfBirth:
                                    type: Date
                                    required: true
                        example: 
                            {
                                email: "viet@gmail.com",
                                displayName: "Parent of student 9",
                                gender: "Nam",
                                phone: "0930000009",
                                dateOfBirth: "1/1/1990"
                            }
            responses:
                201: 
                    description: Tạo tài khoản phụ huynh thành công và gửi mail xác thực
                    content: 
                        application/json:
                            schema: 
                                properties:
                                    displayName:
                                        type: string
                                        required: true
                                    gender:
                                        type: string
                                        format: uppercase
                                        enum:
                                            - nam
                                            - nữ
                                        required: true
                                    email:
                                        type: string
                                        regex: '/^[\w.+\-]+@gmail\.com$/'
                                        required: true
                                    phone:
                                        type: string
                                        length: 10
                                        required: true
                                    dateOfBirth:
                                        type: Date
                                        required: true
                            example: 
                               {
                                    "email": "1692002@gmail.com",
                                    "phone": "0123000003",
                                    "displayName": "Parent of student 10",
                                    "dateOfBirth": "1989-12-31T17:00:00.000Z",
                                    "gender": "Nam",
                                    "employmentStatus": false,
                                    "role": "Parents",
                                    "isVerified": false,
                                    "_id": "6460c815d82dec42df50c6e2",
                                    "deleted": false,
                                    "createdAt": "2023-05-14T11:37:57.219Z",
                                    "updatedAt": "2023-05-14T11:37:57.219Z",
                                    "userStatusText": "Chưa kích hoạt",
                                    "id": "6460c815d82dec42df50c6e2"
                                }
                400:
                    description: Bad Request
                    content:
                        application/json:
                            schema:
                                $ref: '/#/components/schemas/HttpError'
                            example:
                                {
                                    "message": "No student has this parent's phone number!",
                                    "statusCode": 400
                                }


    /users/parents/:classId:
        get: 
            tags: 
                - User
            summary: Lấy thông tin phụ huynh theo lớp học
            description: Lấy ra thông tin phụ huynh của lớp đó
            responses:
                200: 
                    description: Ok
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/Parent'
                    example: 
                        {
                            _id: "6457716cf84f02478de4cb86",
                                phone: "0123000001",
                                displayName: "Parent of student 1",
                                dateOfBirth: "1989-12-31T17:00:00.000Z",
                                gender: "Nam",
                                children: [
                                    {
                                        _id: "645751893a9c237034e67959",
                                        fullName: "Tran Thi B",
                                        parentsPhoneNumber: "0123000001"
                                    }
                                ]
                        }
                        